SQL Notes


SQL: Structure Query Language
it is used for interacting with the database.

Data: it is raw fact information which describes the property of an object.
Properties are also known as attributes.
An object is also known as an entity.

DataBase: It is a collection of data stored in a systematic and organized way. So that the computer can easily perform CRUD operation.

C- Create / Insert
R-Read / Retrieve
U- Update / Modified
D- Delete / Drop

DBMS- Database Management System
DBMS is a software which is used to maintain and manage the database.
Security and authorization are the features provided by DBMS software.
In DBMS software data is stored in the file format.
Query Language is used for interacting with DBMS software.


RDBMS- Relational  Database Management System.
It is used for maintaining and managing the database.
Security and authorization are the features provided by RDBMS software.
In RDBMS , data is stored in tables.
Structure Query Language is used for interacting with RDBMS software.

Relational Model
1.This model was discovered by E.F. Codd (Edger Frank Codd).
2.In relation model data is stored in the form of Tables.
3. Any DBMS which follows a relational model will become RDBMS.

⬇️Column/ Attributes/ Fields
➡️Rows/Tuples









Cell










Rules of E.F. Codd-
The data entered into a cell must be a single value.
According to him we can store data in multiple tables and also we can establish connections between two or more tables using key attributes.
In RDBMS, we stored the data in the form of tables which also include metadata.

MetaData: 
The data about the data is known as metadata.
Metadata and meta table both are autogenerated  by the system.
The data into the table must be validated :
By assigning data types.
By assigning constraints.

Note: Datatypes are mandatory constraints are optional.

DataType: Datatype used to specify what type of data should be stored in the particular location. 
Types of Datatypes:
Char
VarChar
Number
Date
Large Object- 
a. char large object 
b.binary large object 

CHAR- 
CHAR datatypes accept alpha numeric value, upper case , special character , Lowercase.
Single quotes(‘ ‘)
Char(size)
Size 1 up to 2000
Char datatypes follow fixed length memory allocation.

R
A
J
U













VarChar-
Size 1 up to 2000 
VARCHAR(size)
Varchar size increase to 4000
Dynamic Length

Difference between char and varchar
1.Char is fixed length and varchar is variable length(dynamic)
2.Syntax char(size), varchar(size)
3. 1 to 2000 , 1 to 4000

Number- only in oracle.
It is used to store numeric values.
Number(Precision,[scale])
Precision: a.It is stored in Integer values. Range is 1 to 38 .
Syntax: NUMBER(5)- 
9
9
9
9
9


NUMBER(3)-
9
9
9



Scale:  It is used to determine . the no. of digits to store decimal values with in the precision.
Syntax: NUMBER(5,2)- 
9
9
9
9
9


DATE-
It is used to store date in a specified format.
Single quotes- DATE(‘DD-MON-YY’)
Eg. ‘DD-MON-YYYY’(01-jan-2026, ‘DD-MON-YY’(01-jan-26) in the oracle.
In MYSQL /PostSql- YYYY-MM- DD(2023-01-01)

Large Object- 
Character Large Object- a. It is used to store large amounts of characters up to 4 GB in size .
B. Syntax- CLOB

Binary Large Object - it is used to store  binary values of Image, mp3 and mp4 and documents up to 4 GB of size.
	Syntax- BLOB

Constraints-
Constraints are the rule to assign the column to validate the data.

Types of Constraints -
Unique , Not Null, Check, Primary Key , Foreign Key, Default

Unique- which does not accept duplicate or repeated values. 
Not Null- which does not accept null values. It makes column mandatory.
Check- it is an extra validation assigned to the column with condition. If the condition is true the values are accepted else rejected. Check(col_name)
Eg. check(age>=18)
Primary key- which identifies unique records from the table. The primary key is the combination of unique and not null.  A table should have only one primary key. It is also known as a key attribute.
Foreign key-1. which is used to establish connection between multiple tables. 
2.Foreign is not a combination of unique and not null. 
3.If any column wants a foreign key it must be a primary key in  its own table.
4. Foreign key present in the child table but it actually belongs to the parent table.
5. A table can have multiple foreign keys. 
6.Foreign keys are also known as referential integrity constraints.

Difference between primary key and foreign key- 

It’s identifies unique record from the table 
It’s used to establish relations in multiple tables.
It's a combination of unique and not null.
It’s  not a combination of unique and not null.
A table should have only one primary key
A table can have multiple foreign key.
Also known as key attribute
Also known as referential integrity constraints.


Default- It’s used to assign the default value of the column.


Difference between primary key and unique key-

It ensures that there are no duplicate values in the column..Unique will accept null values.
Primary key does not accept duplicate and null values.
 A table can have multiple unique key
A table should have only one primary key.




Null: 1. It’s used to represent nothing or empty cell. 
2. It does not occupy memory. 
3. In RDBMS we can not equate null therefore any arithmetic operation performed on null will always result as null.










Data Query Language-
Select : retrieve data from table and display it.
Projection : retrieve data from table by selecting columns.
Selection: retrieve data from table by selecting both rows and columns.
Joins:  retrieve data from multiple tables simultaneously.


Projection: 
Syntax: Select */[Distinct] col_name/ Expression[alias]
	 From Table_name;
Order of Execution:
From clause
Select clause
From→ database—> search for emp table —> under execution
Select → table which is under execution —> take data and display it;

Distinct: - it is used to remove the duplicate values from the result table.
It should be the first argument in the select clause.
We can also write multiple columns in distinct, it removes the combination of columns in which the records are duplicated.

Expression: - 
— operands and operators
2+2=4

Alias:  -alias name can be  given to the column or expression also in the result table
 	-Alias name can be given with or without as keyword
	-Alias name should be the single string which is separated by underscore or 
              enclosed with the double quotes.
	

Selection: It is used to retrieve the date by selecting both rows and columns.
Syntax: Select */[Distinct] col_name/ Expression[alias]
	 From Table_name
	where<Filter_Condition>

Order of execution: 
From Clause
Where clause
Select clause

– WAQTD ename , deptno of employees working in Deptno 20?

Note: it is used to filter the records
	It execute row by row
	It executes after the execution of from clause



OPERATORS IN SQL:

1. ARITHEMETIC OPERATORS: (+,-,*,/,%)

2. CONCATENATION OPERATOR:- concat(‘string 1’ , ‘string 2’)

3. COMPARISON OPERATORS: (=, != or <>)

4. RELATIONAL OPERATOR: (>, <, >, <=)

5. LOGICAL OPERATORS :-(AND, OR, NOT)

6. SPECIAL OPERATOR (1.IN ,2.NOT IN 3. BETWEEN 4. NOT BETWEEN 5.IS 6.IS NOT    

 							7.LIKE 8. NOT LIKE)

7.SUBQUERY OPERATORS:-(1.ALL  2.ANY 3. EXISTS 4. NOT EXISTS)

8.SET OPERATORS:-
	



Function: set of instruction which perform particular tasks
Inbuilt / predefine: 
single row function (SRF) :
 A function which accepts a single row argument is known as a single row function.
It takes n number of inputs and returns n number of outputs.
SRF is also known as a scalar function.
Mature components of function:
Function name
No of argument
Return type
length():  it is used to count no of strings.
		Syntax:  length(‘string’)

Concat(): used to merge to string.
Syntax: 
Upper():  it is used to convert a given string into uppercase.
	Syntax: upper(‘Sting’)
	Eg. select upper(‘smith’)
lower(): it is used to convert a given string into lowercase.
              	  Syntax: lower(‘string’)



Substr():  it is used to extract a part of string from a given original string. 
           Syntax: substr(‘original_string’, position ,[length])
		Eg.  select substr(ename,1,1) from emp;   (first character of string)
		       Select substr(ename,-1,1) from emp; (last character of string)
Note: in the postgresql there is no negative index so we need to use right(‘string) or left(‘string’)

Locate():  it is used to find location in the string.
	     char: the text you are searching for.
	     string : the text you are searching in.
	    Start_position: starting position where you want to start from.
 	Syntax:   locate(‘char’, ‘string’,start_position)
	Eg. select locate('a','malayalam');

position():  used to find position in text

Eg. 1. select substr('rachit.snap@gmail.com',position('@' in  'rachit.snap@gmail.com'))
Eg. 2. select substr('rachit.snap@gmail.com', 1, position('@' in 'rachit.snap@gmail.com')-1);

round():
ceil():
floor():

current_date(): 	select current_date(); —> display today’s date
select current_timestamp(); display today’s date, time with timezone
select now();---:display today’s date, time with timezone
			select year(now());
Extract(): select extract(month from now()); – display extract data from something	Day : monday
		Dy- mon
		Dd-15
		D-1
		Month: december
		Mon-dec
		Mm:12
		Yyyy:2026
		Yy:2026
		Hh12:10:38:45
		Hh24:16:25:36
		
Eg. SELECT *,year(hiredate) as yy ,monthname(hiredate) as mon, dayname(hiredate) as dy
FROM emp
WHERE YEAR(hiredate) = '1981'
AND MONTHNAME(hiredate) IN ('February', 'April', 'December')
AND DAYNAME(hiredate) IN ('Wednesday', 'Friday');



 Now() and interval : 
        Eg. 	select now()- interval 1 day;
select now() - interval 3 year;
Coalesce():    it is used to remove the side defect of null  values.
		Eg. select ename , sal ,comm , sal + coalesce(comm,0) as total_sal
from emp;
 timestampdiff():
SELECT *
FROM emp
WHERE TIMESTAMPDIFF(YEAR, hiredate, '1985-01-01')>=3;


  

multi row function(mrf): 
It takes no inputs and gives one single output.
Work on multiple values and give single values.
1.  max():it return maximum value in the columns
2. min(): it return minimum value in the columns
3. sum(): it returns submission of the value present in the values
4. avg(): it returns average value 
5. count(): it returns a number  of the values which are present in the columns.

Note:
It accepts only one argument.
We are not supposed to write any other column name along with a multi row function
We can not write a multi row function .
Multi row functions ignore the null values.
Count function is only multi row function which will accept
Asterisks( *) as an argument.

Group By():
 Group by statement group rows that have the same values in one or more column
The group by statement is used with aggregate function(count(), max(), min(), sum(), avg()) to group the result- set one or more columns.



Syntax:
Select group_function/ group_by_exp
From table_name
[Where <filter_codition>]
Group by col_name/exp;

Order of execution:

1.from clause
2. Where clause     [row[by row]
3. Group by clause  [ row by row]
4. Select clause  [ group by group]

Note: 
Group by clause is used to group the records.
Group by executes row by row
Any clause which executes after group by , it must execute group by group only.
The col_name/ exp used for grouping can also be used in select clause.
It executes after the execution of where clause.
Group by clause can be used without where clause.
We can also write multiple columns in group by clause.

Having clause:  it is used to filter the groups
Syntax: 
Select group_by_expression/ group function
From table_name
[where < filter_condition>]
Group by column_ name / expression
Having < group_filter_condition





Order of execution:
From 
Where (if used) : row by row
Group by : row by row
Having     :  group by group 
Select :  group by group 

Select count(*) no_of_employee, deptno
From emp
Group by deptno
Having count(*)>=4;


Order by:  it is used to asc / desc order  to display in table
Syntax:
Select group_by_expression/ group function
From table_name
[where < filter_condition>]
[Group by column_ name / expression]
[Having < group_filter_condition>] 
Order by col_name asc/desc;

Order of execution:
From 
Where (if used) : row by row
Group by : row by row
Having     :  group by group 
Select :  group by group 
Order by: row by row 

Joins:
Joining of multiple tables is known as joins.

Why we use joins ? 
:-> whenever data to be displayed from multiple tables
       Simultaneously we use joins.
Types:
1.Cartesian join/cross join
  :->
   Join each record from table 1 will be merged with all the records
   Of table 2.
    Syntax:  
select col_name from tb1 cross join tb2;
   Example:
		Select * from emp cross join dept;

2.Inner join/Equi join
:->
  It return matched records.
      Syntax:
		Select col_name from tb1
 		Inner Join tb2 oN <Join Condition>
—------------------------------join condition—----------------------------
It is a condition where two tables are merged.
Tab1.col_name = tab2.col_name
Emp.deptno = dept.deptno
		
3. Outer join
Left outer join - it gives all the records from left table and matching records from right tables
Right outer join - it gives all the records from right table and matching records left table
Full outer join  -  it gives matching records from both the tables (use union in case of mysql)
Note : to join n number tables , n-1 join condition
4.Natural join
:->

5.Self join
:-> Joining a table by itself or joining same two tables is known as self join.
Syntax:

ANSI:
	Select col_name
From tb1 join tb2
On <Join_Condition>
Why or when we use self join..??


–// set operators
It are used to combine results of two selected statements/queries.

–union ; it returns only unique value from both the queries
–union all; it returns all the values from both the queries
–intersect ; it returns common values from both queries
–minus ; it return


